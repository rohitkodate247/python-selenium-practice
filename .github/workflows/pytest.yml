name: Python Selenium Tests

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  test:
    runs-on: macos-latest  # or ubuntu-latest, but macOS has GUI-ish support if needed
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.12"

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          python -m pip install -r requirements.txt
          # if requirements.txt doesn't have pytest-html, add:
          python -m pip install pytest-html

      # NOTE: Selenium tests that open a browser often need extra setup in CI.
      # For now we run as-is; for headless runs, ensure your driver uses headless.
      - name: Run tests
        run: |
          pytest -v --html=reports/report.html --self-contained-html
